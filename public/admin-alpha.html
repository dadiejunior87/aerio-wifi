<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AERIO | QG de Contrôle Global</title>
    <link href="https://fonts.googleapis.com" rel="stylesheet">
    <style>
        :root { --primary: #FF4B4B; --accent: #00C2FF; --bg: #020617; --glass: rgba(15, 23, 42, 0.8); }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', sans-serif; }
        body { background: var(--bg); color: white; padding: 40px; }

        .admin-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 50px; border-bottom: 2px solid var(--primary); padding-bottom: 20px; }
        .stats-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 40px; }
        .card { background: var(--glass); padding: 30px; border-radius: 25px; border: 1px solid rgba(255,255,255,0.05); }
        .card h3 { font-size: 10px; color: #475569; text-transform: uppercase; letter-spacing: 2px; }
        .card .val { font-size: 32px; font-weight: 900; color: var(--primary); }

        .table-section { background: var(--glass); padding: 30px; border-radius: 30px; border: 1px solid rgba(255,255,255,0.05); }
        table { width: 100%; border-collapse: collapse; text-align: left; }
        th { font-size: 11px; color: #475569; text-transform: uppercase; padding-bottom: 15px; }
        td { padding: 15px 0; border-bottom: 1px solid rgba(255,255,255,0.02); font-size: 13px; }
        .badge-country { background: rgba(0, 194, 255, 0.1); color: var(--accent); padding: 4px 8px; border-radius: 5px; font-size: 10px; font-weight: 800; }
    </style>
</head>
<body>

    <div class="admin-header">
        <h1>QG DE CONTRÔLE <span style="color:var(--primary)">ALPHA</span></h1>
        <div style="font-size: 12px; font-weight: 800;">ADMINISTRATEUR SYSTÈME</div>
    </div>

    <div class="stats-grid">
        <div class="card"><h3>Total Partenaires</h3><div class="val" id="count-p">0</div></div>
        <div class="card"><h3>Volume Global (Brut)</h3><div class="val" id="total-brut">0 F</div></div>
        <div class="card"><h3>Commission AERIO (15%)</h3><div class="val" id="total-comm" style="color:#00F5A0">0 F</div></div>
    </div>

    <div class="table-section">
        <h2>RÉSEAU PANAFRICAIN ACTIF</h2>
        <table style="margin-top:20px;">
            <thead><tr><th>PARTENAIRE</th><th>PAYS</th><th>EMAIL</th><th>ID SYSTÈME</th></tr></thead>
            <tbody id="list-partners"></tbody>
        </table>
    </div>

    <script>
        async function loadAdminData() {
            // Ici on appelle une API spéciale admin
            const res = await fetch('/api/admin-global-stats');
            const data = await res.json();
            
            document.getElementById('count-p').innerText = data.partners.length;
            document.getElementById('total-brut').innerText = data.totalBrut + " F";
            document.getElementById('total-comm').innerText = (data.totalBrut * 0.15).toFixed(0) + " F";

            let html = "";
            data.partners.forEach(p => {
                html += `<tr>
                    <td><b>${p.name}</b></td>
                    <td><span class="badge-country">${p.country || 'CM'}</span></td>
                    <td>${p.email}</td>
                    <td><code style="color:var(--accent)">${p.partnerID}</code></td>
                </tr>`;
            });
            document.getElementById('list-partners').innerHTML = html;
        }
        window.onload = loadAdminData;
    </script>
</body>
</html>
